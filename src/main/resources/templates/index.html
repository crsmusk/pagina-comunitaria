<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{templates.layout/plantilla :: head}">
</head>

<body class="bg-light">


    <header th:replace="~{templates.layout/plantilla :: barra }"></header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
        <div class="container">
            <div class="collapse navbar-collapse">
                <form class="d-flex w-100" id="searchForm" th:action="@{/actividad/buscar}" method="get">
                    <div class="input-group">

                        <input class="form-control" type="search" name="resultado" placeholder="escriba aqui..."
                            aria-label="Search">


                        <select class="form-select" name="opcion" id="tipoBusqueda" style="max-width: 200px;">
                            <option value="1">Por nombre</option>
                            <option value="2">Por ciudad</option>
                            <option value="3">Por inter√©s</option>
                        </select>


                        <input class="btn btn-primary" type="submit" name="buscar" id="buscar">
                    </div>
                </form>
            </div>
        </div>
    </nav>


    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 mx-auto">
                <div class="card mb-4 shadow" th:each="actividad : ${actividades}">
                    <div class="card-header bg-white d-flex align-items-center p-3">
                        <img th:src="@{${actividad.direccionFotoCreador}}" alt="Avatar" class="rounded-circle me-3"
                            style="width: 48px; height: 48px; object-fit: cover;">
                        <div>
                            <a th:href="@{/usuario/perfil-creador/{cedula}(cedula=${actividad.cedulaCreador})}"
                                class="text-decoration-none text-reset">
                                <h5 class="mb-0" th:text="${actividad.creador}">Juan P√©rez</h5>
                            </a>
                            <small class="text-muted" th:text="${actividad.correoCreador}">@juanp</small>
                        </div>
                    </div>
                    <div class="card-body">
                        <h4 class="card-title" th:text="${actividad.nombreActividad}">Nombre de la actividad</h4>

                        <div class="mb-3">
                            <div class="d-flex align-items-center gap-2 mb-2 text-muted">
                                <i class="bi bi-calendar-event"></i>
                                <span
                                    th:text="${#temporals.format(actividad.fechaInicio, 'dd/MM/yyyy HH:mm')}">Fecha</span>
                            </div>
                            <div class="d-flex align-items-center gap-2 mb-2 text-muted">
                                <i class="bi bi-geo-alt"></i>
                                <span th:text="${actividad.ciudad + ' - ' + actividad.direccion}">Ubicaci√≥n</span>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex flex-wrap gap-1">
                                    <span th:each="interes : ${actividad.intereses}"
                                        class="badge bg-primary bg-opacity-10 text-primary small">
                                        <i class="bi bi-tag"></i>
                                        <span th:text="${interes}">Inter√©s</span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <button class="btn btn-link p-0 text-decoration-none d-block mb-2" data-bs-toggle="collapse"
                                th:data-bs-target="'#descripcionCompleta' + ${actividad.nombreActividad}"
                                aria-expanded="false">
                                <i class="bi bi-info-circle"></i> Mostrar descripci√≥n
                            </button>
                            <div class="collapse" th:id="'descripcionCompleta' + ${actividad.nombreActividad}">
                                <p class="card-text" th:text="${actividad.descripcionActividad}">Descripci√≥n de la
                                    actividad</p>
                            </div>
                        </div>
                        <img th:src="@{${actividad.direccionImagen}}" alt="Imagen de la actividad"
                            class="img-fluid rounded mb-3" style="width: 100%; object-fit: cover;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex gap-2">
                                <button class="btn btn-primary">üëç Inscribirme</button>
                                <button class="btn btn-outline-primary">üí¨ Comentar</button>
                                <!--<div th:if="${#authentication.principal.cedula == actividad.cedulaCreador}">-->
                                <div>
                                    <!--/actualizar-actividad-->
                                     <a th:href="@{/actividad/actualizar/{fechaCreacion}(fechaCreacion=${actividad.fechaCreacion})}"
                                        class="btn btn-warning text-white bg-dark border-dark" >
                                       
                                        <!--onclick="document.getElementById('formOculto').submit(); return false;"-->
                                        <i class="bi bi-pencil"></i> Editar
                                    </a>
                                    <a th:href="@{/actividad/eliminar-actividad/{fechaCreacion}(fechaCreacion=${actividad.fechaCreacion})}"
                                        class="btn btn-warning text-white bg-dark border-dark">
                                        <i class="bi bi-trash"></i> Eliminar
                                    </a>
                        
                                </div>
                            </div>
                            <span class="badge bg-success" th:text="'Cupos disponibles: ' + ${actividad.cupos}">
                                cupos disponibles
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>